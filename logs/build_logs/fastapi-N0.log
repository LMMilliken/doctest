FROM python:3.8

# Set the working directory
WORKDIR /app

# Clone the repository
RUN git clone https://github.com/tiangolo/fastapi.git .

# Set up the working environment
RUN python3 -m venv venv

# Activate the virtual environment
SHELL ["/bin/bash", "-c"]
RUN source venv/bin/activate

# Install project dependencies
RUN pip install -r requirements.txt

# Run the test suite
RUN pytest
machine already started
TEMP DIR: /tmp/tmp.z4i0yM2OfT


setup repo.
Warning: Permanently added '[localhost]:3022' (ED25519) to the list of known hosts.
Dockerfile
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 427B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.8
#3 DONE 0.9s

#4 [1/7] FROM docker.io/library/python:3.8@sha256:bb707718063867801af7828a5107c6852cb2c0628bdea71d15b3ac2b1d045308
#4 DONE 0.0s

#5 [2/7] WORKDIR /app
#5 CACHED

#6 [3/7] RUN git clone https://github.com/tiangolo/fastapi.git .
#6 0.175 Cloning into '.'...
#6 DONE 8.9s

#7 [4/7] RUN python3 -m venv venv
#7 DONE 2.7s

#8 [5/7] RUN source venv/bin/activate
#8 DONE 0.4s

#9 [6/7] RUN pip install -r requirements.txt
#9 0.999 Obtaining file:///app (from -r requirements.txt (line 1))
#9 1.003   Installing build dependencies: started
#9 2.563   Installing build dependencies: finished with status 'done'
#9 2.565   Checking if build backend supports build_editable: started
#9 2.597   Checking if build backend supports build_editable: finished with status 'done'
#9 2.598   Getting requirements to build editable: started
#9 2.692   Getting requirements to build editable: finished with status 'done'
#9 2.694   Preparing editable metadata (pyproject.toml): started
#9 2.811   Preparing editable metadata (pyproject.toml): finished with status 'done'
#9 2.957 Collecting httpx<0.25.0,>=0.23.0
#9 3.168   Downloading httpx-0.24.1-py3-none-any.whl (75 kB)
#9 3.281      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 75.4/75.4 kB 711.4 kB/s eta 0:00:00
#9 3.402 Collecting pytest<8.0.0,>=7.1.3
#9 3.459   Downloading pytest-7.4.4-py3-none-any.whl (325 kB)
#9 3.577      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 325.3/325.3 kB 2.7 MB/s eta 0:00:00
#9 4.298 Collecting coverage[toml]<8.0,>=6.5.0
#9 4.356   Downloading coverage-7.5.4-cp38-cp38-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (234 kB)
#9 4.423      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 234.3/234.3 kB 3.6 MB/s eta 0:00:00
#9 4.639 Collecting mypy==1.8.0
#9 4.700   Downloading mypy-1.8.0-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.5 MB)
#9 8.295      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.5/12.5 MB 3.5 MB/s eta 0:00:00
#9 9.127 Collecting ruff==0.2.0
#9 9.186   Downloading ruff-0.2.0-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (7.6 MB)
#9 11.34      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 7.6/7.6 MB 3.5 MB/s eta 0:00:00
#9 11.41 Collecting dirty-equals==0.6.0
#9 11.47   Downloading dirty_equals-0.6.0-py3-none-any.whl (26 kB)
#9 12.21 Collecting sqlalchemy<1.4.43,>=1.3.18
#9 12.26   Downloading SQLAlchemy-1.4.42-cp38-cp38-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl (1.6 MB)
#9 12.77      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.6/1.6 MB 3.2 MB/s eta 0:00:00
#9 13.04 Collecting databases[sqlite]<0.7.0,>=0.3.2
#9 13.10   Downloading databases-0.6.2-py3-none-any.whl (21 kB)
#9 13.21 Collecting flask<3.0.0,>=1.1.2
#9 13.26   Downloading flask-2.3.3-py3-none-any.whl (96 kB)
#9 13.29      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 96.1/96.1 kB 4.0 MB/s eta 0:00:00
#9 13.37 Collecting anyio[trio]<4.0.0,>=3.2.1
#9 13.43   Downloading anyio-3.7.1-py3-none-any.whl (80 kB)
#9 13.46      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 80.9/80.9 kB 4.0 MB/s eta 0:00:00
#9 13.51 Collecting PyJWT==2.8.0
#9 13.56   Downloading PyJWT-2.8.0-py3-none-any.whl (22 kB)
#9 13.68 Collecting pyyaml<7.0.0,>=5.3.1
#9 13.75   Downloading PyYAML-6.0.1-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (736 kB)
#9 13.99      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 736.6/736.6 kB 3.1 MB/s eta 0:00:00
#9 14.02 Collecting passlib[bcrypt]<2.0.0,>=1.7.2
#9 14.08   Downloading passlib-1.7.4-py2.py3-none-any.whl (525 kB)
#9 14.19      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 525.6/525.6 kB 5.0 MB/s eta 0:00:00
#9 14.22 Collecting types-ujson==5.7.0.1
#9 14.28   Downloading types_ujson-5.7.0.1-py3-none-any.whl (2.2 kB)
#9 14.37 Collecting types-orjson==3.6.2
#9 14.43   Downloading types_orjson-3.6.2-py3-none-any.whl (2.2 kB)
#9 14.62 Collecting mkdocs-material==9.5.18
#9 14.68   Downloading mkdocs_material-9.5.18-py3-none-any.whl (8.8 MB)
#9 18.51      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 8.8/8.8 MB 2.3 MB/s eta 0:00:00
#9 18.64 Collecting mdx-include<2.0.0,>=1.4.1
#9 18.70   Downloading mdx_include-1.4.2-py3-none-any.whl (11 kB)
#9 18.75 Collecting mkdocs-redirects<1.3.0,>=1.2.1
#9 18.81   Downloading mkdocs_redirects-1.2.1-py3-none-any.whl (6.0 kB)
#9 18.91 Collecting typer>=0.12.0
#9 18.97   Downloading typer-0.12.3-py3-none-any.whl (47 kB)
#9 18.99      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 47.2/47.2 kB 2.9 MB/s eta 0:00:00
#9 19.26 Collecting jieba==0.42.1
#9 19.32   Downloading jieba-0.42.1.tar.gz (19.2 MB)
#9 24.67      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 19.2/19.2 MB 3.8 MB/s eta 0:00:00
#9 25.00   Preparing metadata (setup.py): started
#9 25.26   Preparing metadata (setup.py): finished with status 'done'
#9 25.66 Collecting pillow==10.3.0
#9 25.73   Downloading pillow-10.3.0-cp38-cp38-manylinux_2_28_x86_64.whl (4.5 MB)
#9 40.96      ━━━━━━━━━                                1.0/4.5 MB 4.9 MB/s eta 0:00:01
#9 40.97 ERROR: Exception:
#9 40.97 Traceback (most recent call last):
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/urllib3/response.py", line 438, in _error_catcher
#9 40.97     yield
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/urllib3/response.py", line 561, in read
#9 40.97     data = self._fp_read(amt) if not fp_closed else b""
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/urllib3/response.py", line 527, in _fp_read
#9 40.97     return self._fp.read(amt) if amt is not None else self._fp.read()
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/cachecontrol/filewrapper.py", line 90, in read
#9 40.97     data = self.__fp.read(amt)
#9 40.97   File "/usr/local/lib/python3.8/http/client.py", line 459, in read
#9 40.97     n = self.readinto(b)
#9 40.97   File "/usr/local/lib/python3.8/http/client.py", line 503, in readinto
#9 40.97     n = self.fp.readinto(b)
#9 40.97   File "/usr/local/lib/python3.8/socket.py", line 669, in readinto
#9 40.97     return self._sock.recv_into(b)
#9 40.97   File "/usr/local/lib/python3.8/ssl.py", line 1274, in recv_into
#9 40.97     return self.read(nbytes, buffer)
#9 40.97   File "/usr/local/lib/python3.8/ssl.py", line 1132, in read
#9 40.97     return self._sslobj.read(len, buffer)
#9 40.97 socket.timeout: The read operation timed out
#9 40.97 
#9 40.97 During handling of the above exception, another exception occurred:
#9 40.97 
#9 40.97 Traceback (most recent call last):
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/cli/base_command.py", line 160, in exc_logging_wrapper
#9 40.97     status = run_func(*args)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/cli/req_command.py", line 247, in wrapper
#9 40.97     return func(self, options, args)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/commands/install.py", line 419, in run
#9 40.97     requirement_set = resolver.resolve(
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/resolver.py", line 92, in resolve
#9 40.97     result = self._result = resolver.resolve(
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/resolvelib/resolvers.py", line 481, in resolve
#9 40.97     state = resolution.resolve(requirements, max_rounds=max_rounds)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/resolvelib/resolvers.py", line 348, in resolve
#9 40.97     self._add_to_criteria(self.state.criteria, r, parent=None)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/resolvelib/resolvers.py", line 172, in _add_to_criteria
#9 40.97     if not criterion.candidates:
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/resolvelib/structs.py", line 151, in __bool__
#9 40.97     return bool(self._sequence)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py", line 155, in __bool__
#9 40.97     return any(self)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py", line 143, in <genexpr>
#9 40.97     return (c for c in iterator if id(c) not in self._incompatible_ids)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/found_candidates.py", line 47, in _iter_built
#9 40.97     candidate = func()
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/factory.py", line 206, in _make_candidate_from_link
#9 40.97     self._link_candidate_cache[link] = LinkCandidate(
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 297, in __init__
#9 40.97     super().__init__(
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 162, in __init__
#9 40.97     self.dist = self._prepare()
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 231, in _prepare
#9 40.97     dist = self._prepare_distribution()
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 308, in _prepare_distribution
#9 40.97     return preparer.prepare_linked_requirement(self._ireq, parallel_builds=True)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/operations/prepare.py", line 491, in prepare_linked_requirement
#9 40.97     return self._prepare_linked_requirement(req, parallel_builds)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/operations/prepare.py", line 536, in _prepare_linked_requirement
#9 40.97     local_file = unpack_url(
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/operations/prepare.py", line 166, in unpack_url
#9 40.97     file = get_http_url(
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/operations/prepare.py", line 107, in get_http_url
#9 40.97     from_path, content_type = download(link, temp_dir.path)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/network/download.py", line 147, in __call__
#9 40.97     for chunk in chunks:
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/cli/progress_bars.py", line 53, in _rich_progress_bar
#9 40.97     for chunk in iterable:
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_internal/network/utils.py", line 63, in response_chunks
#9 40.97     for chunk in response.raw.stream(
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/urllib3/response.py", line 622, in stream
#9 40.97     data = self.read(amt=amt, decode_content=decode_content)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/urllib3/response.py", line 587, in read
#9 40.97     raise IncompleteRead(self._fp_bytes_read, self.length_remaining)
#9 40.97   File "/usr/local/lib/python3.8/contextlib.py", line 131, in __exit__
#9 40.97     self.gen.throw(type, value, traceback)
#9 40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/urllib3/response.py", line 443, in _error_catcher
#9 40.97     raise ReadTimeoutError(self._pool, None, "Read timed out.")
#9 40.97 pip._vendor.urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='files.pythonhosted.org', port=443): Read timed out.
#9 40.97 
#9 40.97 [notice] A new release of pip is available: 23.0.1 -> 24.1.1
#9 40.97 [notice] To update, run: pip install --upgrade pip
#9 ERROR: process "/bin/bash -c pip install -r requirements.txt" did not complete successfully: exit code: 2
------
 > [6/7] RUN pip install -r requirements.txt:
40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/urllib3/response.py", line 587, in read
40.97     raise IncompleteRead(self._fp_bytes_read, self.length_remaining)
40.97   File "/usr/local/lib/python3.8/contextlib.py", line 131, in __exit__
40.97     self.gen.throw(type, value, traceback)
40.97   File "/usr/local/lib/python3.8/site-packages/pip/_vendor/urllib3/response.py", line 443, in _error_catcher
40.97     raise ReadTimeoutError(self._pool, None, "Read timed out.")
40.97 pip._vendor.urllib3.exceptions.ReadTimeoutError: HTTPSConnectionPool(host='files.pythonhosted.org', port=443): Read timed out.
40.97 
40.97 [notice] A new release of pip is available: 23.0.1 -> 24.1.1
40.97 [notice] To update, run: pip install --upgrade pip
------
Dockerfile:17
--------------------
  15 |     
  16 |     # Install project dependencies
  17 | >>> RUN pip install -r requirements.txt
  18 |     
  19 |     # Run the test suite
--------------------
ERROR: failed to solve: process "/bin/bash -c pip install -r requirements.txt" did not complete successfully: exit code: 2
removing docker image...
clearing temp directory
