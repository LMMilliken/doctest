# Use the official Python image from the Docker Hub
FROM python:3.8

# Set the working directory in the container
WORKDIR /app

# Clone the repository
RUN git clone https://github.com/Textualize/rich.git

# Change directory to the cloned repository
WORKDIR /app/rich

# Install Poetry
RUN pip install poetry

# Install the project dependencies using Poetry
RUN poetry install

# Run the test suite
RUN poetry run pytest
machine already started
TEMP DIR: /tmp/tmp.54aMkAMQWk


setup repo.
Warning: Permanently added '[localhost]:3022' (ED25519) to the list of known hosts.
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 458B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.8
#3 DONE 1.5s

#4 [1/7] FROM docker.io/library/python:3.8@sha256:4d3590657cf443010b58ae94a09c59505a750744ed70d2028b35dac101df5e3a
#4 DONE 0.0s

#5 [2/7] WORKDIR /app
#5 CACHED

#6 [3/7] RUN git clone https://github.com/Textualize/rich.git
#6 0.212 Cloning into 'rich'...
#6 DONE 21.5s

#7 [4/7] WORKDIR /app/rich
#7 DONE 0.1s

#8 [5/7] RUN pip install poetry
#8 1.513 Collecting poetry
#8 1.602   Downloading poetry-1.8.3-py3-none-any.whl (249 kB)
#8 1.879      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 249.9/249.9 kB 901.3 kB/s eta 0:00:00
#8 2.005 Collecting requests<3.0,>=2.26
#8 2.016   Downloading requests-2.32.3-py3-none-any.whl (64 kB)
#8 2.074      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 64.9/64.9 kB 1.3 MB/s eta 0:00:00
#8 2.139 Collecting installer<0.8.0,>=0.7.0
#8 2.149   Downloading installer-0.7.0-py3-none-any.whl (453 kB)
#8 2.477      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 453.8/453.8 kB 1.4 MB/s eta 0:00:00
#8 2.918 Collecting dulwich<0.22.0,>=0.21.2
#8 2.932   Downloading dulwich-0.21.7-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (516 kB)
#8 3.230      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 517.0/517.0 kB 1.8 MB/s eta 0:00:00
#8 3.328 Collecting poetry-core==1.9.0
#8 3.342   Downloading poetry_core-1.9.0-py3-none-any.whl (309 kB)
#8 3.461      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 309.5/309.5 kB 2.6 MB/s eta 0:00:00
#8 3.530 Collecting cachecontrol[filecache]<0.15.0,>=0.14.0
#8 3.551   Downloading cachecontrol-0.14.0-py3-none-any.whl (22 kB)
#8 3.657 Collecting importlib-metadata>=4.4
#8 3.667   Downloading importlib_metadata-8.0.0-py3-none-any.whl (24 kB)
#8 3.713 Collecting pexpect<5.0.0,>=4.7.0
#8 3.723   Downloading pexpect-4.9.0-py2.py3-none-any.whl (63 kB)
#8 3.747      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 63.8/63.8 kB 2.9 MB/s eta 0:00:00
#8 3.817 Collecting tomlkit<1.0.0,>=0.11.4
#8 3.826   Downloading tomlkit-0.12.5-py3-none-any.whl (37 kB)
#8 3.888 Collecting pkginfo<2.0,>=1.10
#8 3.903   Downloading pkginfo-1.11.1-py3-none-any.whl (31 kB)
#8 4.067 Collecting virtualenv<21.0.0,>=20.23.0
#8 4.079   Downloading virtualenv-20.26.3-py3-none-any.whl (5.7 MB)
#8 6.207      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 5.7/5.7 MB 2.7 MB/s eta 0:00:00
#8 6.252 Collecting pyproject-hooks<2.0.0,>=1.0.0
#8 6.269   Downloading pyproject_hooks-1.1.0-py3-none-any.whl (9.2 kB)
#8 6.308 Collecting crashtest<0.5.0,>=0.4.1
#8 6.319   Downloading crashtest-0.4.1-py3-none-any.whl (7.6 kB)
#8 6.419 Collecting keyring<25.0.0,>=24.0.0
#8 6.428   Downloading keyring-24.3.1-py3-none-any.whl (38 kB)
#8 6.476 Collecting requests-toolbelt<2.0.0,>=1.0.0
#8 6.485   Downloading requests_toolbelt-1.0.0-py2.py3-none-any.whl (54 kB)
#8 6.504      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 54.5/54.5 kB 3.4 MB/s eta 0:00:00
#8 6.537 Collecting fastjsonschema<3.0.0,>=2.18.0
#8 6.547   Downloading fastjsonschema-2.20.0-py3-none-any.whl (23 kB)
#8 6.596 Collecting shellingham<2.0,>=1.5
#8 6.605   Downloading shellingham-1.5.4-py2.py3-none-any.whl (9.8 kB)
#8 6.657 Collecting poetry-plugin-export<2.0.0,>=1.6.0
#8 6.668   Downloading poetry_plugin_export-1.8.0-py3-none-any.whl (10 kB)
#8 6.723 Collecting packaging>=23.1
#8 6.733   Downloading packaging-24.1-py3-none-any.whl (53 kB)
#8 6.761      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 54.0/54.0 kB 2.0 MB/s eta 0:00:00
#8 6.840 Collecting cleo<3.0.0,>=2.1.0
#8 6.850   Downloading cleo-2.1.0-py3-none-any.whl (78 kB)
#8 6.884      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 78.7/78.7 kB 2.5 MB/s eta 0:00:00
#8 6.932 Collecting build<2.0.0,>=1.0.3
#8 6.942   Downloading build-1.2.1-py3-none-any.whl (21 kB)
#8 6.999 Collecting platformdirs<5,>=3.0.0
#8 7.011   Downloading platformdirs-4.2.2-py3-none-any.whl (18 kB)
#8 7.095 Collecting tomli<3.0.0,>=2.0.1
#8 7.105   Downloading tomli-2.0.1-py3-none-any.whl (12 kB)
#8 7.206 Collecting trove-classifiers>=2022.5.19
#8 7.220   Downloading trove_classifiers-2024.7.1-py3-none-any.whl (13 kB)
#8 7.465 Collecting msgpack<2.0.0,>=0.5.2
#8 7.480   Downloading msgpack-1.0.8-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (390 kB)
#8 7.607      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 390.5/390.5 kB 3.2 MB/s eta 0:00:00
#8 7.679 Collecting filelock>=3.8.0
#8 7.689   Downloading filelock-3.15.4-py3-none-any.whl (16 kB)
#8 9.239 Collecting rapidfuzz<4.0.0,>=3.0.0
#8 9.251   Downloading rapidfuzz-3.9.3-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (3.4 MB)
#8 10.75      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.4/3.4 MB 2.3 MB/s eta 0:00:00
#8 10.86 Collecting urllib3>=1.25
#8 10.87   Downloading urllib3-2.2.2-py3-none-any.whl (121 kB)
#8 10.93      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 121.4/121.4 kB 1.9 MB/s eta 0:00:00
#8 11.01 Collecting zipp>=0.5
#8 11.03   Downloading zipp-3.19.2-py3-none-any.whl (9.0 kB)
#8 11.11 Collecting SecretStorage>=3.2
#8 11.13   Downloading SecretStorage-3.3.3-py3-none-any.whl (15 kB)
#8 11.21 Collecting importlib-resources
#8 11.23   Downloading importlib_resources-6.4.0-py3-none-any.whl (38 kB)
#8 11.29 Collecting jeepney>=0.4.2
#8 11.30   Downloading jeepney-0.8.0-py3-none-any.whl (48 kB)
#8 11.32      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 48.4/48.4 kB 2.4 MB/s eta 0:00:00
#8 11.35 Collecting jaraco.classes
#8 11.36   Downloading jaraco.classes-3.4.0-py3-none-any.whl (6.8 kB)
#8 11.42 Collecting ptyprocess>=0.5
#8 11.44   Downloading ptyprocess-0.7.0-py2.py3-none-any.whl (13 kB)
#8 11.52 Collecting idna<4,>=2.5
#8 11.57   Downloading idna-3.7-py3-none-any.whl (66 kB)
#8 11.60      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 66.8/66.8 kB 2.4 MB/s eta 0:00:00
#8 11.81 Collecting charset-normalizer<4,>=2
#8 11.82   Downloading charset_normalizer-3.3.2-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (141 kB)
#8 11.87      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 141.1/141.1 kB 2.9 MB/s eta 0:00:00
#8 11.96 Collecting certifi>=2017.4.17
#8 11.98   Downloading certifi-2024.6.2-py3-none-any.whl (164 kB)
#8 12.04      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 164.4/164.4 kB 3.0 MB/s eta 0:00:00
#8 12.12 Collecting distlib<1,>=0.3.7
#8 12.18   Downloading distlib-0.3.8-py2.py3-none-any.whl (468 kB)
#8 12.36      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 468.9/468.9 kB 2.5 MB/s eta 0:00:00
#8 12.95 Collecting cryptography>=2.0
#8 12.97   Downloading cryptography-42.0.8-cp37-abi3-manylinux_2_28_x86_64.whl (3.9 MB)
#8 14.75      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 3.9/3.9 MB 2.2 MB/s eta 0:00:00
#8 14.88 Collecting more-itertools
#8 14.89   Downloading more_itertools-10.3.0-py3-none-any.whl (59 kB)
#8 14.94      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 59.2/59.2 kB 1.4 MB/s eta 0:00:00
#8 15.37 Collecting cffi>=1.12
#8 15.39   Downloading cffi-1.16.0-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (444 kB)
#8 15.65      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 444.7/444.7 kB 1.8 MB/s eta 0:00:00
#8 15.72 Collecting pycparser
#8 15.73   Downloading pycparser-2.22-py3-none-any.whl (117 kB)
#8 15.81      ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 117.6/117.6 kB 1.4 MB/s eta 0:00:00
#8 16.04 Installing collected packages: trove-classifiers, ptyprocess, fastjsonschema, distlib, zipp, urllib3, tomlkit, tomli, shellingham, rapidfuzz, pyproject-hooks, pycparser, poetry-core, platformdirs, pkginfo, pexpect, packaging, msgpack, more-itertools, jeepney, installer, idna, filelock, crashtest, charset-normalizer, certifi, virtualenv, requests, jaraco.classes, importlib-resources, importlib-metadata, dulwich, cleo, cffi, requests-toolbelt, cryptography, cachecontrol, build, SecretStorage, keyring, poetry-plugin-export, poetry
#8 18.13 Successfully installed SecretStorage-3.3.3 build-1.2.1 cachecontrol-0.14.0 certifi-2024.6.2 cffi-1.16.0 charset-normalizer-3.3.2 cleo-2.1.0 crashtest-0.4.1 cryptography-42.0.8 distlib-0.3.8 dulwich-0.21.7 fastjsonschema-2.20.0 filelock-3.15.4 idna-3.7 importlib-metadata-8.0.0 importlib-resources-6.4.0 installer-0.7.0 jaraco.classes-3.4.0 jeepney-0.8.0 keyring-24.3.1 more-itertools-10.3.0 msgpack-1.0.8 packaging-24.1 pexpect-4.9.0 pkginfo-1.11.1 platformdirs-4.2.2 poetry-1.8.3 poetry-core-1.9.0 poetry-plugin-export-1.8.0 ptyprocess-0.7.0 pycparser-2.22 pyproject-hooks-1.1.0 rapidfuzz-3.9.3 requests-2.32.3 requests-toolbelt-1.0.0 shellingham-1.5.4 tomli-2.0.1 tomlkit-0.12.5 trove-classifiers-2024.7.1 urllib3-2.2.2 virtualenv-20.26.3 zipp-3.19.2
#8 18.13 WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv
#8 18.28 
#8 18.28 [notice] A new release of pip is available: 23.0.1 -> 24.1.1
#8 18.28 [notice] To update, run: pip install --upgrade pip
#8 DONE 18.5s

#9 [6/7] RUN poetry install
#9 0.613 Creating virtualenv rich-WCawzC9--py3.8 in /root/.cache/pypoetry/virtualenvs
#9 0.987 Installing dependencies from lock file
#9 1.123 
#9 1.124 Package operations: 29 installs, 1 update, 0 removals
#9 1.124 
#9 1.125   - Installing distlib (0.3.7)
#9 1.140   - Installing exceptiongroup (1.1.3)
#9 1.140   - Installing filelock (3.12.2)
#9 1.145   - Installing iniconfig (2.0.0)
#9 1.145   - Installing packaging (23.1)
#9 1.426   - Installing platformdirs (3.10.0)
#9 1.427   - Installing pluggy (1.2.0)
#9 1.468   - Installing pygments (2.16.1)
#9 1.472   - Downgrading setuptools (70.1.0 -> 68.0.0)
#9 1.761   - Installing tomli (2.0.1)
#9 2.780   - Installing cfgv (3.3.1)
#9 2.782   - Installing click (8.1.7)
#9 2.784   - Installing identify (2.5.24)
#9 2.785   - Installing coverage (7.2.7)
#9 2.786   - Installing mdurl (0.1.2)
#9 2.851   - Installing mypy-extensions (1.0.0)
#9 2.863   - Installing nodeenv (1.8.0)
#9 2.869   - Installing pathspec (0.11.2)
#9 2.879   - Installing pytest (7.4.2)
#9 2.950   - Installing pyyaml (6.0.1)
#9 3.322   - Installing six (1.16.0)
#9 3.324   - Installing typing-extensions (4.7.1)
#9 3.541   - Installing virtualenv (20.24.5)
#9 5.385   - Installing asv (0.5.1)
#9 5.386   - Installing attrs (21.4.0)
#9 5.387   - Installing markdown-it-py (2.2.0)
#9 5.388   - Installing black (22.12.0)
#9 5.389   - Installing mypy (0.971)
#9 5.459   - Installing pre-commit (2.21.0)
#9 5.469   - Installing pytest-cov (3.0.0)
#9 13.10 
#9 13.10 Installing the current project: rich (13.7.1)
#9 DONE 13.3s

#10 [7/7] RUN poetry run pytest
#10 2.245 ============================= test session starts ==============================
#10 2.245 platform linux -- Python 3.8.19, pytest-7.4.2, pluggy-1.2.0
#10 2.245 rootdir: /app/rich
#10 2.245 configfile: pyproject.toml
#10 2.245 testpaths: tests
#10 2.245 plugins: cov-3.0.0
#10 2.245 collected 852 items
#10 2.245 
#10 2.245 tests/test_align.py ................                                     [  1%]
#10 2.269 tests/test_ansi.py .......................                               [  4%]
#10 2.299 tests/test_bar.py .......                                                [  5%]
#10 2.308 tests/test_block_bar.py ....                                             [  5%]
#10 2.313 tests/test_box.py ........                                               [  6%]
#10 2.322 tests/test_card.py .                                                     [  6%]
#10 2.386 tests/test_cells.py .......                                              [  7%]
#10 2.394 tests/test_color.py .................                                    [  9%]
#10 2.411 tests/test_color_triplet.py ...                                          [ 10%]
#10 2.415 tests/test_columns.py .                                                  [ 10%]
#10 2.436 tests/test_columns_align.py .                                            [ 10%]
#10 2.444 tests/test_console.py .................................................. [ 16%]
#10 2.509 ..............................................                           [ 21%]
#10 2.580 tests/test_constrain.py .                                                [ 21%]
#10 2.582 tests/test_containers.py ....                                            [ 22%]
#10 2.587 tests/test_control.py .......                                            [ 23%]
#10 2.595 tests/test_emoji.py ......                                               [ 23%]
#10 2.601 tests/test_file_proxy.py ...                                             [ 24%]
#10 2.606 tests/test_filesize.py ..                                                [ 24%]
#10 2.608 tests/test_getfileno.py ...                                              [ 24%]
#10 2.611 tests/test_highlighter.py .............................................. [ 30%]
#10 2.666 ....................................                                     [ 34%]
#10 2.710 tests/test_inspect.py ....s....ss..................................      [ 39%]
#10 2.797 tests/test_json.py .                                                     [ 39%]
#10 2.798 tests/test_jupyter.py ...                                                [ 40%]
#10 2.802 tests/test_layout.py ......                                              [ 40%]
#10 2.816 tests/test_live.py ..........                                            [ 41%]
#10 4.907 tests/test_live_render.py ....                                           [ 42%]
#10 4.914 tests/test_log.py ...                                                    [ 42%]
#10 4.953 tests/test_logging.py ....                                               [ 43%]
#10 5.007 tests/test_markdown.py ......                                            [ 43%]
#10 5.042 tests/test_markdown_no_hyperlinks.py .                                   [ 44%]
#10 5.054 tests/test_markup.py .....................                               [ 46%]
#10 5.078 tests/test_measure.py ....                                               [ 46%]
#10 5.082 tests/test_null_file.py .                                                [ 47%]
#10 5.084 tests/test_padding.py .....                                              [ 47%]
#10 5.090 tests/test_palette.py .                                                  [ 47%]
#10 5.091 tests/test_panel.py ..........                                           [ 48%]
#10 5.105 tests/test_pick.py .                                                     [ 49%]
#10 5.107 tests/test_pretty.py .............................................s..... [ 55%]
#10 5.186                                                                          [ 55%]
#10 5.186 tests/test_progress.py ......................................            [ 59%]
#10 5.613 tests/test_prompt.py .......                                             [ 60%]
#10 5.627 tests/test_protocol.py ......                                            [ 61%]
#10 5.634 tests/test_ratio.py .......                                              [ 61%]
#10 5.643 tests/test_repr.py ........                                              [ 62%]
#10 5.654 tests/test_rich_print.py .......                                         [ 63%]
#10 5.663 tests/test_rule.py ................                                      [ 65%]
#10 5.685 tests/test_rule_in_table.py ....                                         [ 65%]
#10 5.694 tests/test_screen.py .                                                   [ 66%]
#10 5.695 tests/test_segment.py .................................................  [ 71%]
#10 5.749 tests/test_spinner.py .....                                              [ 72%]
#10 5.757 tests/test_stack.py .                                                    [ 72%]
#10 5.758 tests/test_status.py ..                                                  [ 72%]
#10 5.975 tests/test_style.py ...........................                          [ 75%]
#10 6.032 tests/test_styled.py .                                                   [ 76%]
#10 6.034 tests/test_syntax.py ........................                            [ 78%]
#10 6.538 tests/test_table.py ...................                                  [ 81%]
#10 6.615 tests/test_text.py ..................................................... [ 87%]
#10 6.672 ......................................................                   [ 93%]
#10 6.738 tests/test_theme.py .....                                                [ 94%]
#10 6.747 tests/test_tools.py ....                                                 [ 94%]
#10 6.751 tests/test_traceback.py ...................                              [ 96%]
#10 7.026 tests/test_tree.py .....s.s.                                             [ 98%]
#10 7.038 tests/test_windows_renderer.py sssssssssssssssss                         [100%]
#10 7.072 
#10 7.072 ======================= 829 passed, 23 skipped in 5.96s ========================
#10 DONE 7.2s

#11 exporting to image
#11 exporting layers
#11 exporting layers 2.4s done
#11 writing image sha256:af35b5a457ba038bed0f59ab58a298dca0a5a445acd464594a07db0fda0290d9
#11 writing image sha256:af35b5a457ba038bed0f59ab58a298dca0a5a445acd464594a07db0fda0290d9 done
#11 naming to docker.io/library/temp_image done
#11 DONE 2.4s
At least 1 test passed.
Docker build completed successfully on virtual machine.
removing docker image...
clearing temp directory
