# Use the official Python image from the Docker Hub
FROM python:3.9

# Install Poetry
RUN pip install poetry

# Install Git
RUN apt-get update && apt-get install -y git

# Set the working directory in the container
WORKDIR /app

# Clone the repository
RUN git clone https://github.com/Textualize/rich.git .

# Copy the Poetry lock file and pyproject.toml to the working directory
COPY poetry.lock pyproject.toml /app/

# Install project dependencies using Poetry
RUN poetry install

# Install pytest in case it is not included in the project's dependencies
RUN poetry run pip install pytest

# Run the test suite
RUN poetry run pytest
machine already started
TEMP DIR: /tmp/tmp.cuCIb6S4av


setup repo.
Warning: Permanently added '[localhost]:3022' (ED25519) to the list of known hosts.
Dockerfile
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 673B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.9
#3 DONE 2.8s

#4 [internal] load build context
#4 DONE 0.0s

#5 [1/9] FROM docker.io/library/python:3.9@sha256:3b199ecfbdb57cf390ef4af18d3c0ea630ade330c5b1eaf7aa37971ce304cc03
#5 resolve docker.io/library/python:3.9@sha256:3b199ecfbdb57cf390ef4af18d3c0ea630ade330c5b1eaf7aa37971ce304cc03 0.1s done
#5 sha256:3b199ecfbdb57cf390ef4af18d3c0ea630ade330c5b1eaf7aa37971ce304cc03 10.35kB / 10.35kB done
#5 sha256:a92d11ae6145091cfd7df8f9c2ebe14059b16f076db2a10a062bf43ad6733508 2.52kB / 2.52kB done
#5 sha256:8912c37cec43f73d2f3453018d798e6e03ee9612f95c5052a84ae72c04f73dfe 7.26kB / 7.26kB done
#5 CANCELED

#4 [internal] load build context
#4 transferring context: 2B done
#4 DONE 0.0s

#6 [2/9] RUN pip install poetry
#6 CACHED

#7 [3/9] RUN apt-get update && apt-get install -y git
#7 CACHED

#8 [4/9] WORKDIR /app
#8 CACHED

#9 [5/9] RUN git clone https://github.com/Textualize/rich.git .
#9 CACHED

#10 [6/9] COPY poetry.lock pyproject.toml /app/
#10 ERROR: failed to calculate checksum of ref b2804007-ed8a-46de-ba98-5f7c2b695425::ushi4sutbyzr5ptbw28n6u8nv: "/pyproject.toml": not found
------
 > [6/9] COPY poetry.lock pyproject.toml /app/:
------
Dockerfile:17
--------------------
  15 |     
  16 |     # Copy the Poetry lock file and pyproject.toml to the working directory
  17 | >>> COPY poetry.lock pyproject.toml /app/
  18 |     
  19 |     # Install project dependencies using Poetry
--------------------
ERROR: failed to solve: failed to compute cache key: failed to calculate checksum of ref b2804007-ed8a-46de-ba98-5f7c2b695425::ushi4sutbyzr5ptbw28n6u8nv: "/pyproject.toml": not found
removing docker image...
clearing temp directory
